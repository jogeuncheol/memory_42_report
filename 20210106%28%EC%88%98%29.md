# 학습 레포트 8일차 2021-01-06(수)
## 1.학습 날짜
> ### 2021-01-06(수)
## 2.학습 시간
> ## 00:00 ~ 05:00 (집)
> ## 17:00 ~ 20:00 (집)
## 3.학습 범위 및 주제
### | file discriptor, open 함수, read 함수에 대해서 알아보기 | get next line 함수 작성 하기 |
## 4.동료 학습 방법
- 온라인 - 슬랙 검색!!
## 5.학습 목표
- get next line 과제를 풀기위한 open 함수와 file descriptor, read 함수 테스트
## 6.상세 학습 내용
- **코딩에 사용된 시간** 약 8시간
- **참고한 내용**

### file descriptor
파일 기술자는 운영체제에서 파일을 사용할 때 각 파일에 대한 정보를 유지하는 기억장치의 한 영역이 또는 그 정보라고 한다.\
`open` 함수를 통해 파일을 읽어오면 해당 파일에 인덱스를 저장해 두고 사용자가 원하는 파일을 읽을 수 있도록 도와준다. 인덱스는 0 부터 시작되며 0, 1, 2는 예약된 인덱스로 0은 표준 입력, 1은 표준 출력, 2는 표준 에러를 뜻한다.\
파일로부터 받아오게되면 인덱스는 3부터 시작되며, 해당 파일은 `close` 함수를 사용해 닫을 수 있다.

### open 함수
- **형식** `int open(char *path, int flags[, mode_t perm])`
- **반환 값** `int` 형
- **설명**\
`path`에 해당하는곳으로 부터 파일을 연다.
open 함수로부터 파일을 읽을 수 있고, 키보드로 입력을 받아 처리할 수 있다. 그리고 출력 재지정으로 해당 프로그램에 입력으로 줄 수 있다.\
두번째 flags는 시작모드로 읽기전용, 쓰기전용, 읽기쓰기 가능으로 파일을 열 수 있다. 또한 파일이 없다면 파일을 만드는 CREATE, 유저에게 권한을 추가할 수 있는 IRUSR, IWUSR 등 플래그가 붙을 수 있다.\
읽기 전용 = O_RDONLY, 쓰기 전용 = O_WRONLY, 읽기쓰기 = O_RDWR\
파일 열기에 실패하면 -1을, 성공하면 해당 file descriptor의 인덱스를 반환한다.

### read 함수
- **형식** `int read(int fd, char *buf, int count)`
- **반환 값** `int` 형
- **설명**\
`read` 함수는 `open`한 파일로 부터 `count` byte 만큼 읽는다.\
`fd`는 파일디스크립터로 `open` 한 파일의 인덱스이다.\
`buf`는 출력 버퍼로 `fd`에서 읽은 데이터가 저장된다.\
`count`는 읽는데 필요한 바이트 수로 `buf`에 저장되는 바이트 수 이다.
`read` 함수의 반환값은 `int`형 데이터로 `buf`에 저장된 길이와 같다.
만약 파일의 끝을 읽으면 `read` 함수는 0을 반환한다.

### 새롭게 알게된 내용들 정리
### open의 반환값 fd 와 read의 인자 fd
get next line 과제를 진행하기 위해 파일 입출력에 대해 공부를 진행하였다.\
`open` 함수로 파일 a.txt을 읽었다고 했을 때, fd = 3으로 저장이 되었고, 충분히 큰 버퍼크기로 `read`를 하면 read의 반환값은 a.txt의 전체 바이트 수가 되었다. 그리고 다시한번 `read` 함수를 불러오면 이미 a.txt의 파일 끝까지 읽었기 때문에 더이상 파일을 읽지 않고 0을 반환한다.\
이는 함수로 만들어 `open`한 파일의 fd를 인자로 넘겨주어도 동일하게 작동을 하였다.\
get next line은 open이후 get_next_line 함수를 작성해 fd를 인자로 넘겨주게 되어있고, get_next_line 함수 안에서 최소한의 버퍼로 fd에 해당하는 파일을 `read`함수로 읽어 `\n`을 찾아 한 줄씩 반환해야 한다.\

**fd**가 단순히 파일을 정상적으로 열였을 때 알려주기 위한 반환값이라고 생각했었는데, 사실은 `open`한 파일에 대한 인덱스로써 `fd`를 이용해 해당 파일에 접근 가능하게 해준다고 이해하였다.\




## 7.학습 내용에 대한 개인적인 총평
## 8.다음 학습 계획