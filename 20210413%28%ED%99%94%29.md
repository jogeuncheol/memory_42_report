# 학습 레포트 66일차 2021-04-13 (화)

## 1. 학습 날짜
> ### 2021-04-13 (화)

## 2. 학습 시간
> ### 14:00 ~ 18:00 (집)
> ### 22:00 ~ 24:00 (집)

## 3. 학습 범위 및 주제
### | 벽 색깔 바꾸기 |

## 4. 동료 학습 방법
- 해당 없음

## 5. 학습 목표
- 벽의 색깔을 바꿔본다.

## 6. 상세 학습 내용
- **실제 코딩 시간** 5시간
- **참고한 내용** 없음

### 벽 그라데이션

이전에 배경색깔의 그라데이션을 넣어본 적이 있어 이번에는 벽이 멀리 있으면 어둡게, 가까이 있으면 원색으로 보이도록 수정을 해 보았다. 계산으로 구한 dst를 일정 값 구간에 따라 색을 어둡게 해 주었다.

```c
void screen_pixel_put(t_param *param, int width_inc, float fov)
{
...
    dst;
    
    int color;
    if (dst < 20)
        color = 0x0000ff;
    else if (dst < 30)
        color = 0x0000ef;
    else if (dst < 50)
        color = 0x0000df;
    else if (dst < 100)
        color = 0x0000af;
    else if (dst < 200)
        color = 0x00005f;
    else
        color = 0x00001f;
...
}
```
벽의 색을 지정하는 구간이 if문으로 나눠 두었다. 원색을 `0x0000ff`로 파랑색이고 거리가 멀수록 검정색에 가까워 지도록 해 두었다.\
하지만 위 방식에는 문제가 있었다. 플레이어로 부터 거리 구간이 제한이 되어있고 값의 경계가 분명하다는 것이었다. 또 회전을 하면 거리가 바뀌므로 벽 색깔이 변화되는 것이 눈에 띄었다.

```c
    color = (color - dst * 2) > 0x00001f ? color - (dst * 2) : 0x0;
```
처음 작성한 코드의 문제점을 찾고 위 방법으로 코드를 수정하였다. color값을 최소로 표현 해 줄 값보다 크다면 `원색 - 거리`를 적용 해 색을 어둡게 만들어 주었다. 거리에 2를 곱한 이유는 멀리있으면 더 값을 많이 빼, 어둡게 해주기 위함이다. `어두움의 배수`가 된다.\
코드를 수정하고 더 자연스러운 그라데이션 표현이 되었고, 천장과 바닥의 그라데이션에도 잘 어울렸다.

## 7. 학습 내용에 대한 개인적인 총평

## 8. 다음 학습 계획
- cub3D 공부