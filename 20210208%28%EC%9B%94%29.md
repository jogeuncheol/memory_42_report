# 학습 레포트 26일차 2021-02-08(월)
## 1.학습 날짜
> ### 2021-02-08(월)
## 2.학습 시간
> ### 16:00 ~ 18:40(집)
> ### 20:00 ~ 24:00(집)
## 3.학습 범위 및 주제
### | virtualbox osx 설치 |
## 4.동료 학습 방법
- 온라인 - 슬랙 검색 - minjakim 님의 macOS 설치 글
## 5.학습 목표
- 로컬 환경에서 클러스터와 동일한 환경으로 만들기
- virtualbox osx 설치
- git 저장소 연결
## 6.상세 학습 내용
- **실제 코딩 시간** 0시간
- **참고한 내용** 슬랙, [버추얼박스 위키](https://ko.wikipedia.org/wiki/%EB%B2%84%EC%B6%94%EC%96%BC%EB%B0%95%EC%8A%A4), [해상도 조절](https://www.nemonein.xyz/2019/01/1579/)

minjakim 님께서 슬랙에 공유해주신 virtualbox 에 macOS설치하기를 따라하면서 설치했던 내용을 되돌아보고 짧게라도 정리해보고자 한다.

### VirtualBox
버추얼박스는 본래 이노테크가 개발한 뒤, 현재는 오라클이 개발 중인 소프트웨어로, 리눅스, macOS, 솔라리스, 윈도우즈를 게스트 운영 체제로 가상화하는 x86 가상화 소프트웨어이다. 썬 마이크로시스템즈는 버추얼박스를 개발한 이노테크를 인수하였고, 오라클이 썬 마이크로시스템즈를 인수하면서 현재 오라클 VM 버추얼박스로 배포되고 있다.\
버추얼박스는 학교 수업에서 솔라리스 운영체제를 이용했었기 때문에 설치가 되어있었는데, 현재 pc가 9년정도 된 시스템이라 그런지 속도도 느리고, 설정 문제였는지 좋지 않은 기억이 있어 별로 사용하고 싶은 마음은 없었다. 얼마 전 vscode의 라이브쉐어 기능을 활용해 원격접속이후 코딩은 vscode를 활용해 그래도 쾌적하게 사용해보려는 시도를 했었는데, 결국 원격접속을 해야하고 접속을 유지해야 vscode로 코드 작성도 가능했기 때문에 결국 macOS환경을 구축하려고 생각을 했다.

### macOS 설치
버추얼박스는 설치되어 있었지만, 슬랙에서 버추얼박스에 맥os를 설치하는 방법과 필요한 자료들을 직접 만드시고 배포해주신 minjakim 님의 글을 보고 해당 버전에 맞춰 버추얼박스를 먼저 재설치를 해주었다.\
macOS 설치는 어렵지 않았다. 먼저 virtualbox와 해당 버전의 익스텐션을 설치 해주고, 버추얼박스에서 새로운 게스트를 만들어 주면 되었다.\
이전에 사용했을때 gui 환경은 너무 답답하고 응답이 생길때마다 렉이 심해 사용하지 않으려고 했었는데 일단은 설치하고 의외로 잘 될수도 있기에 일단 설치를 진행했다.\
게스트의 자원을 설정해 주고 minjakim 님께서 설명해주신 대로 우선 virtualbox를 종료하고 다음의 명령어를 cmd 또는 powershell에서 실행해주면 된다고 한다.
```
./VBoxManage.exe modifyvm "macOS Mojave for 42" --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff
./VBoxManage setextradata "macOS Mojave for 42" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
./VBoxManage setextradata "macOS Mojave for 42" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
./VBoxManage setextradata "macOS Mojave for 42" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
./VBoxManage setextradata "macOS Mojave for 42" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
./VBoxManage setextradata "macOS Mojave for 42" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
```
해당 명령어를 사용하려면 먼저 virtualbox가 설치된 위치로 옮겨가야 한다. 보통 `C:\programfiles\oracle\virtualbox\ `로 가주면 된다.\
이후 위 명령어를 입력해주고 virtualbox실행시켜 macOS 설치를 진행 하면 된다.\
설치는 거의 자동이고 따로 설정을 해주어야 하는 부분은 없어 쉽게 진행하였다.

### 재설치
가상 os에서 사용하는 자원은 실제 하드웨어의 자원에서 할당해 사용하기 때문에 실제 물리 코어의 갯수나 메모리량에 성능의 차이가 심해진다. 내 컴퓨터는 인텔의 3세대 cpu를 사용하고 램도 8기가로 지금 컴퓨터 시장에서는 하위에 있는 성능이지만 내가 사용하는데에는 문제가 전혀 없어 아직 pc를 유지하고 있다.\
하지만 가상머신을 구동하기에는 그렇지 않은것 같다. 메모리도 부족하고 가상화 가속 기능도 부족한 부분으로 버추얼박스에서 성능이 너무 않나온다고 생각한다.

처음 macOS를 설치 했을 때, 보여지는 렉은 예전에 솔라리스를 사용했을 때 처럼 거의 사용하지 못할 정도였다. 그런데 여기저기 찾아보다보니 실제 물리 코어 갯수만큼 할당을 해주게 되면 오히려 느려진다는 글을 보고 재설치를 해보았는데 정말 사용할만한 수준의 속도로 돌아가게 되었다.\
내 컴퓨터는 물리코어가 4코어로 2개의 코어를 가상머신에 할당해 주었고 이것의 영향인지 vnc보다 확실히 빠르고 충분히 실사용 해도 되겠다고 느껴졌다. 화면의 끊김은 보이지만 vnc보다는 확실히 사용하기 좋았다.\
재설치를 하면서 게스트확장이라는 것을 설치하면 속도가 증가할 것이라는 글이 인터넷에 많아 시도를 해보았는데 내 컴퓨터에서는 속도의 향상보다는 오히려 키 입력이 제대로 되지 않는 문제가 발생해 네 번의 설치를 반복했다.

### 해상도
버추얼박스의 기본 해상도가 낮고 변경이 안되어 찾아보니 게스트확장을 설치하면 해상도 조절이 가능하다는 것을 알게되었다. 하지만 게스트 확장을 설치하면 내 환경에서는 키 입력에 오류가 있어서 다른 방법을 찾아보았는데 터미널에서 값을 주는것으로 해상도 변경이 되는것을 알게되었다.
```
./VBoxManage setextradata "macOS" VBoxInternal2/EfiGraphicsResolution 1920x1080
```
위의 명령어를 os 설치를 했을 때 처럼 실행하게되면 다음 가상머신 실행시 해상도가 1920x1080으로 변경된다. 위 방법을 통해 fhd 환경으로 설정을 해주었고, 찾아본 블로그 글에서는 실제 모니터가 fhd라면 1440x900 정도가 적당할 것이라는 것을 보고 처음에 해당 해상도로 작업을 했었는데 결국 최대화로 사용을 하게 되다보니 그냥 1920x1080 으로 해상도를 변경해 주었다.

## 7.학습 내용에 대한 개인적인 총평
예전에 솔라리스를 사용했을 때 너무 느렸던 기억이 있어 버추얼박스 사용을 최대한 하지 않으려고 했었는데, 속도의 개선이 있어서 정말 다행이었다. 버추얼박스의 속도가 느려서 작업을 할 수 없을 정도였다면 맥미니를 중고로 구입할 생각까지 있었는데, 일단 최대한 현재 가진것에서 최대한으로 사용을 하려고 한다. 실제 맥이 필요한 시기가 오겠지만, 미리 앞서 지출을 하고싶지 않았다. 애플 제품이 가격이 나가기 때문에 구매에 고민이 많아진다. 게다가 이번에 새로 나온 m1은 1세대이기 때문에 다음 세대 또는 개선판이 나오면 구매를 고려해보아도 좋을것 같다.\
macOS 설치는 minjakim님께서 올려주신 자료들로 정말 쉽게 설치를 끝낼 수 있어서 정말 감사의 인사를 드립니다. 나중에 클러스터에 갈 수 있게 되면 찾아뵙고 인사를 드려야 겠다.

## 8.다음 학습 계획
- 클러스터 처럼 가상머신 구성하기
- printf 옵션 구현하기