# 학습 레포트 68일차 2021-04-16 (금)

## 1. 학습 날짜
> ### 2021-04-16 (금)

## 2. 학습 시간
> ### 18:00 ~ 24:00 (집)

## 3. 학습 범위 및 주제
### | 벽 추적 hit_x |

## 4. 동료 학습 방법
- 해당 없음

## 5. 학습 목표
- 벽 추적 방법 2 hit_x

## 6. 상세 학습 내용
- **실제 코딩 시간** 5시간
- **참고한 내용** 없음

### hit_x 찾기

hit_x를 찾기위해서는 hit_y를 추적하는 것고 방식은 동일하지만 몇가지 수정이 필요했다.

```c
if ((param->degree > 0 && param->degree < 180) || (param->degree < -180 && param->degree > -360))
{
    next_y = g_y + 1;
    hit_y = next_y * TILE_SIZE;
    if (fabs(cos(param->seta)) < 0.001)
        tan = 0;
    else
        tan = sin(M_PI_2 - param->seta) / cos(M_PI_2 - param->seta);
    hit_x = (hit_y - param->y) * tan + param->x;
}
else if ((param->degree < 0 && param->degree > -180) || (param->degree > 180 && param->degree < 360))
{
    next_y = g_y;
    hit_y = next_y * TILE_SIZE;
    if (fabs(cos(param->seta)) < 0.001)
        tan = 0;
    else
        tan = sin(M_PI_2 - param->seta) / cos(M_PI_2 - param->seta);
    hit_x = (hit_y - param->y) * tan + param->x;
}
else
{
    hit_x = param->x;
    hit_y = param->y;
}
```

if 조건에 각도에 대해 절댓값을 적용 할 수 없었다. 왜냐하면 범위가 sin 함수의 범위로 0도 ~ 180도와 -180도 ~ -360도를 같은 범위로 두어야 하고, 0도 ~ -180도 와 180도 ~ 360도를 같은 범위로 설정해야 하기 때문이었다.

동쪽 서쪽과 동일하게 북쪽 서쪽도 g_y, g_y + 1로 설정하였다. tan값을 구할 떄 M_PI_2 = 90도에서 플레이어의 방향 각도를 빼준 이유는 hit_x를 구하는 방법이 sin 함수를 사용하기 때문에 일반 각도를 90도를 기준으로 돌려서 cos 과 같게 계산하기 위해서이다.




## 7. 학습 내용에 대한 개인적인 총평

## 8. 다음 학습 계획
- cub3D 공부 - 연속 격자 추적