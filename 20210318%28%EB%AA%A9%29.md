# 학습 레포트 54일차 2021-03-18 (목)

## 1. 학습 날짜
> ### 2021-03-18 (목)

## 2. 학습 시간
> ### 21:00 ~ 24:00 (집)

## 3. 학습 범위 및 주제
### | cub3D 좌 우 움직이기 |

## 4. 동료 학습 방법
- 해당 없음

## 5. 학습 목표
- cub3D의 플레이어 좌 우로 움직이기

## 6. 상세 학습 내용
- **실제 코딩 시간** 3시간
- **참고한 내용** 없음

### 플레이어를 좌 우로 움직이기

현재 작성된 좌 우 움직임은 좌표평면에서 x 축으로 움직이는 것만 표현을 해 두었었다. 따라서 바라보는 방향에 맞춰 좌 우로 움직일 수 있어야 했다.

이전까지 작성한 것을 토대로 바라보는 방향에 수직으로 좌, 우 움직임을 표현 할 수 있었다. 방향 좌표에 수직인 직선 위를 움직인다고 생각하면 쉽게 생각할 수 있다. 그리고 방향 좌표에 수직이면서 가상의 원 위에 존재하는 좌표는 2개가 만들어진다. 그중 방향에 왼편에 있는것을 왼쪽으로, 오른편에 위치한 좌표를 오른쪽으로 좌표 값을 설정하고 플레이어의 위치를 생신하면 된다.

### cos(90) sin(90)
플레이어가 바라보는 방향 좌표값에 수직인 좌표의 값을 알아내어야 한다. 방법은 어렵지 않았다.
바라보는 방향 좌표는 기준 좌표로부터 seta 만큼 회전한 각도로 나타냈기 때문에 현재 seta 값 더하기 90를 해주면 된다.

```
int key_press(int keycode, t_param, *param)
{
...
    else if (keycode == KEY_A)
    {
        param->x = param->x - (cos(seta + 90));
        param->y = param->y - (sin(seta + 90));
    }
    else if (keycode == KEY_D)
    {
        param->x = param->x + (cos(seta + 90));
        param->y = param->y + (sin(seta + 90));
    }
...
}
```
처음 작성했던 코드인데 문제점이 있었다. 원하는 대로 방향좌표에 수직으로 움직이지 않는다는 점 이었다. 문제점은 각도에 있었다. 지금까지 삼각함수의 각도에 라디안 값으로 회전을 해주었는데, 90은 degree 로 각도가 제대로 전달 되지 않았다.

### cos(M_PI / 2) sin(M_PI / 2)
따라서 90도에 해당하는 pi / 2 를 값으로 더해주어 해결했다.
```c
KEY_A
param->x - (5 * cos(seta + (M_PI / 2)));
param->y - (5 * sin(seta + (M_PI / 2)));
```
```c
KEY_D
param->x + (5 * cos(seta + (M_PI / 2)));
param->y + (5 * sin(seta + (M_PI / 2)));
```
M_PI 값은 math.h 에 정의되어있는 파이 값이다. 5를 곱한 이유는 좌 우로 움직일 거리를 1픽셀이 아닌 5픽셀 만큼씩 움직여 주기 위해 곱해주었다.

## 7. 학습 내용에 대한 개인적인 총평
전진 후진에 이어 좌 우 움직임을 수정해 보았다. 좌 우 움직임은 바라보는 방향에 90도 회전한 좌표값으로 이동하면 된다. 코드를 작성하고 테스트 할때 90도를 값으로 사용하려고 해서 원하지 않는 결과를 계속 냈었다. 플레이어의 움직임을 기준좌표와 함께 작동하도록 한 것은 괜찮은 것 같다.

## 8. 다음 학습 계획
- cub3D 공부