# 학습 레포트 7일차 2021-01-05(화)
## 1.학습 날짜
> ### 2021-01-05(화)
## 2.학습 시간
> ### 22:05 ~ 23:55 (집)
## 3.학습 범위 및 주제
### |ft_split 함수에서 free를 해주는 이유, lstaddback 함수의 이중포인터 인자|
## 4.동료 학습 방법
- 온라인 - seshin, dongilee, hyeonpar 님과 토론
## 5.학습 목표
- ft_split 함수에서 free를 해주는 이유 알아보기.
- lstaddback 함수의 인자는 왜 이중 포인터인가.
## 6.상세 학습 내용
- **코딩에 사용된 시간** 약 1시간
- **참고한 내용** [동적할당 함수](https://twinw.tistory.com/52), [free 함수](https://modoocode.com/244)

### free 함수
- **형식**
`void free(void *ptr)`
- **반환 값** 없다.
- **설명**\
메모리를 해제한다.\
`free` 는 포인터 변수에 메모리를 동적 할당해주는 함수 `malloc`, `calloc`, `realloc` 등 을 사용해 할당된 메모리를 해제하는 함수로 나중에 다시 사용될 수 있게 해준다.

### ft_split 함수에서 free 함수를 사용하는 경우.
왜 `split`함수에서는 `free`를 사용해서 메모리 해제를 해주어야 하는지 seshin 님께서 질문을 올려주셨다.\
libft 과제를 하다보면 `split` 이외에 `strdup`, `strjoin`, `substr` 등 함수들도 동적할당을 해서 함수를 작성하게 되는데 왜 `split` 함수에서 `free` 함수의 사용이 가능하고, 왜 사용해야 하는지 질문을 해주셨다.\
`split` 함수 작성 코드 중 일부를 가져왔다.
```c
if (!(ptr[i] = (char *)malloc(sizeof(char) * (word + 1))))
{
    ft_make_free(ptr);
    free(ptr);
    return (NULL);
}
```
처음 `split`함수를 작성 할 때에는 free를 해주지 않았었는데 슬랙에서 함수에 대해 검색하면서 알게 된 것이 할당에 실패하면 free를 해주어야 한다고 글이 많이 있었다.

`split` 함수와 `dup`, `join`, `substr` 함수들의 차이점은 함수 내에서 동적할당을 몇번 하는지 횟수의 차이점이 있었다. 다른 함수들은 함수 내에서 단일 문자열을 만들기 위한 동적할당을 위해 `malloc` 을 사용했다. 하지만 `split` 함수는 함수 내에서 포인터의 배열을 만들어 나눈 문자열들을 각각 저장하도록 동적할당을 해주어야 한다. 따라서 동적 할당을 할 때, 이전의 할당된 메모리 공간이 존재하고, 만약 중간에 메모리 할당에 실패 하면 이전까지 할당된 공간을 해제 해주어야 메모리의 누수가 없을것이다. 물론 함수 외부에서 할당된 메모리 공간을 해제 해줄 수 있다. 하지만 프로그래머도 사람이고, 프로그램의 코드가 길어지고, 분업이 되다보면 다른 공간에서 해제를 해주는것보다 담당 한 함수에서 오류가 있다면 그곳에서 직접 메모리 해제를 해주는것이 가장 예외상황을 줄이고 오류가 없는 프로그램을 작성하는 것이라고 생각하였다.

### free 함수를 사용하고 해당 메모리는 어떻게 되는가
과제의 동료평가를 받으면서 해당 카뎃분이 알려주신 것인데, free를 해준 후 NULL을 넣어주면 더 좋다고 하셨다. 이유로는 나중에 다시 다른 곳에서 해당 메모리를 사용하게 되었을 때, 원하지 않는 값이 존재 할 수 있기 때문에 NULL을 넣어주어야 한다고 하셨다.\
이 과정에 대해서도 질문을 해주셨다.\
|---|
|---|