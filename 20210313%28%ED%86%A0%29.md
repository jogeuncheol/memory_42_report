# 학습 레포트 일차 2021-03-13 (토)

## 1. 학습 날짜
> ### 2021-03-13 (토)

## 2. 학습 시간
> ### 20:00 ~ 23:57 (집)

## 3. 학습 목표

## 4.
## 5.
## 6. 상세 학습 내용
- **실제 코딩 시간** 3시간
- **참고한 내용** [pikuma 자바스크립트 raycaste](https://courses.pikuma.com/)

cub3D 관련 자료를 찾으며 pikuma 의 자바스크립트로 쓰여진 raycasting 강의를 들으며 자바스크립트 코드를 c 코드로 변환해보며 학습을 해 보았다.

### cub3D draw map

2d 맵을 그리기 위해 2차원 배열을 만들고 맵을 정리한다.
```c
void map(t_param *param)
{
    int wall[5][5] =
    {
        {1, 1, 1, 1, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 0, 0, 0, 1},
        {1, 1, 1, 1, 1}
    };
}
```
먼저 5 x 5 크기의 배열을 만들어 맵을 만들어 보는 것을 목표로 했다.

```c
#define TILE_SIZE 32
#define MAP_NUM_ROWS 5
#define MAP_NUM_COLS 5

#define WINDOW_WIDTH TILE_SIZE * MAP_NUM_COLS
#define WINDOW_HEIGHT TILE_SIZE * MAP_NUM_ROWS
```
배열로 맵의 벽을 나타내는 방법을 사용하고 값 하나에 한 픽셀을 사용한다면 너무 작기 때문에 배열의 좌표마다 32 픽셀의 값을 갖도록 해서 벽의 두께를 표현하도록 하였다. TILE_SIZE 는 벽의 두께로 좌표마다 32 픽셀의 값을 가지게 된다. 예를 들어 (0, 0) 좌표의 값이 표현될 때 가로 세로 32 픽셀씩 표현되도록 한다.

```c
int i, j;
int tile_x, tile_y;

i = 0;
while (i < MAP_NUM_ROWS)
{
    tile_y = 0;
    while (tile_y < TILE_SIZE)
    {
        j = 0;
        while (j < MAP_NUM_COLS)
        {
            int tileX = j * TILE_SIZE;
            int tileY = i * TILE_SIZE;
            
            tile_x = 0;
            while (tile_x < TILE_SIZE)
            {
                if (wall[i][j] == 1)
                    mlx_pixel_put(param->mlx_ptr, param->win_ptr, tileX + tile_x, tileY + tile_y, 0xffff);
                else
                    mlx_pixel_put(param->mlx_ptr, param->win_ptr, tileX + tile_x, tileY + tile_y, 0xffffff);
                tile_x++;
            }
            j++;
        }
        tile_y++;
    }
    i++;
}
```

변수 tile_x, tile_y 는 각 좌표 별 그려야 하는 픽셀 즉 32 픽셀을 카운트하는 값으로 사용하였다. 좌표마다 가로 32픽셀을 그려야 하고, 그 좌표의 값이 1일 때 `0xffff` 값 시안 색으로 표현 된다. 좌표의 값이 1이 아닐 때는 `0xffffff` 값 희색으로 표현 된다.

4중 반복문은 배열 값에 따라 맵을 그리기 위해 가로로 좌표별 32픽셀 씩 5번, 한 좌표에서 세로로 32픽셀을 그리기 위해 tile_y 값을 TILE_SIZE 만큼 증가시키며 같은 반복을 하게 된다.

